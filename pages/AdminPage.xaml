<Page x:Class="WPF_Payment_Project.Pages.AdminPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Панель администратора"
      Loaded="Page_Loaded">

    <Grid Background="{DynamicResource BackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Section -->
        <Border Grid.Row="0" 
                Background="{DynamicResource SurfaceBrush}"
                BorderThickness="0,0,0,1"
                BorderBrush="{DynamicResource BorderBrush}">
            <Grid Margin="24,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock x:Name="txtWelcome"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"/>
                    <TextBlock x:Name="txtRole"
                               FontSize="14"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               Margin="0,4,0,0"/>
                </StackPanel>

                <Button x:Name="btnLogout"
                        Grid.Column="1"
                        Content="Выход"
                        Width="100"
                        Height="36"
                        Click="btnLogout_Click"
                        Style="{DynamicResource SecondaryButtonStyle}"/>
            </Grid>
        </Border>

        <!-- Statistics Cards -->
        <Grid Grid.Row="1" Margin="24,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Users Card -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8"
                    Margin="0,0,12,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" 
                                      Color="{DynamicResource ShadowColor}" Opacity="0.1"/>
                </Border.Effect>
                <Grid Margin="20,16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Пользователи"
                               FontSize="13"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="txtTotalUsers"
                               Grid.Row="1"
                               Text="0"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="{DynamicResource PrimaryBrush}"
                               Margin="0,8,0,0"/>
                </Grid>
            </Border>

            <!-- Payments Card -->
            <Border Grid.Column="1" 
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8"
                    Margin="6,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" 
                                      Color="{DynamicResource ShadowColor}" Opacity="0.1"/>
                </Border.Effect>
                <Grid Margin="20,16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Платежи"
                               FontSize="13"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="txtTotalPayments"
                               Grid.Row="1"
                               Text="0"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="{DynamicResource AccentBrush}"
                               Margin="0,8,0,0"/>
                </Grid>
            </Border>

            <!-- Categories Card -->
            <Border Grid.Column="2" 
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8"
                    Margin="6,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" 
                                      Color="{DynamicResource ShadowColor}" Opacity="0.1"/>
                </Border.Effect>
                <Grid Margin="20,16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Категории"
                               FontSize="13"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="txtTotalCategories"
                               Grid.Row="1"
                               Text="0"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="{DynamicResource WarningBrush}"
                               Margin="0,8,0,0"/>
                </Grid>
            </Border>

            <!-- Total Sum Card -->
            <Border Grid.Column="3" 
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8"
                    Margin="12,0,0,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" 
                                      Color="{DynamicResource ShadowColor}" Opacity="0.1"/>
                </Border.Effect>
                <Grid Margin="20,16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Общая сумма"
                               FontSize="13"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="txtTotalSum"
                               Grid.Row="1"
                               Text="0 руб."
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="{DynamicResource DangerBrush}"
                               Margin="0,8,0,0"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Main Content Area -->
        <Grid Grid.Row="2" Margin="24,0,24,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Panel -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8"
                    Margin="0,0,16,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" 
                                      Color="{DynamicResource ShadowColor}" Opacity="0.1"/>
                </Border.Effect>
                
                <StackPanel Margin="16">
                    <TextBlock Text="Управление"
                               FontSize="12"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               Margin="0,0,0,16"/>
                    
                    <Button x:Name="btnManageUsers"
                            Content="👥 Пользователи"
                            Height="44"
                            Margin="0,0,0,8"
                            HorizontalContentAlignment="Left"
                            Padding="12,0"
                            Click="btnManageUsers_Click"
                            Style="{DynamicResource SecondaryButtonStyle}"/>
                    
                    <Button x:Name="btnManagePayments"
                            Content="💳 Платежи"
                            Height="44"
                            Margin="0,0,0,8"
                            HorizontalContentAlignment="Left"
                            Padding="12,0"
                            Click="btnManagePayments_Click"
                            Style="{DynamicResource SecondaryButtonStyle}"/>
                    
                    <Button x:Name="btnManageCategories"
                            Content="📁 Категории"
                            Height="44"
                            Margin="0,0,0,24"
                            HorizontalContentAlignment="Left"
                            Padding="12,0"
                            Click="btnManageCategories_Click"
                            Style="{DynamicResource SecondaryButtonStyle}"/>

                    <TextBlock Text="Отчеты"
                               FontSize="12"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               Margin="0,0,0,16"/>
                    
                    <Button x:Name="btnViewDiagrams"
                            Content="📊 Диаграммы"
                            Height="44"
                            Margin="0,0,0,8"
                            HorizontalContentAlignment="Left"
                            Padding="12,0"
                            Click="btnViewDiagrams_Click"
                            Style="{DynamicResource SecondaryButtonStyle}"/>
                    
                    <Button x:Name="btnExportReports"
                            Content="📄 Экспорт"
                            Height="44"
                            HorizontalContentAlignment="Left"
                            Padding="12,0"
                            Click="btnExportReports_Click"
                            Style="{DynamicResource SecondaryButtonStyle}"/>
                </StackPanel>
            </Border>

            <!-- Content Area -->
            <Border Grid.Column="1" 
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="8">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" 
                                      Color="{DynamicResource ShadowColor}" Opacity="0.1"/>
                </Border.Effect>
                
                <TabControl x:Name="tabControl"
                            SelectionChanged="tabControl_SelectionChanged"
                            Margin="16">
                    <TabItem Header="Пользователи">
                        <Frame x:Name="frameContent" NavigationUIVisibility="Hidden"/>
                    </TabItem>
                    <TabItem Header="Платежи"/>
                    <TabItem Header="Категории"/>
                </TabControl>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" 
                VerticalAlignment="Bottom"
                Background="{DynamicResource SurfaceBrush}"
                BorderThickness="0,1,0,0"
                BorderBrush="{DynamicResource BorderBrush}">
            <TextBlock x:Name="txtLastActivity"
                       Text="Последняя активность: -"
                       FontSize="12"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       Margin="24,8"/>
        </Border>
    </Grid>
</Page>
